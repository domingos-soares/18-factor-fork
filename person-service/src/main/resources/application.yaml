spring:
  application:
    name: person-service

  datasource:
    url: ${JDBC_URL:jdbc:h2:mem:persondb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
    username: ${JDBC_USERNAME:sa}
    password: ${JDBC_PASSWORD:}

  flyway:
    enabled: true

springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    url: /openapi.yaml

server:
  port: ${PORT:8080}
  shutdown: graceful

spring.lifecycle:
  timeout-per-shutdown-phase: ${SHUTDOWN_TIMEOUT:30s}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      probes:
        enabled: true
      show-details: never
  tracing:
    sampling:
      probability: ${TRACING_SAMPLING_PROBABILITY:1.0}

person-service:
  api-key:
    required: ${PERSON_SERVICE_API_KEY_REQUIRED:false}
    value: ${PERSON_SERVICE_API_KEY:}
  rate-limit:
    requestsPerSecond: ${PERSON_SERVICE_RPS:50}
  cost-budget:
    maxCostPerRequestUsd: ${PERSON_SERVICE_MAX_COST_PER_REQUEST_USD:0.01}
  repository:
    type: ${PERSON_SERVICE_REPOSITORY_TYPE:inmemory}
